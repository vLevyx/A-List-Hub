(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{3844:function(e,t,r){Promise.resolve().then(r.t.bind(r,2972,23)),Promise.resolve().then(r.t.bind(r,2778,23)),Promise.resolve().then(r.bind(r,9010)),Promise.resolve().then(r.bind(r,4603))},9763:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var n=r(2265),s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),a=(e,t)=>{let r=(0,n.forwardRef)((r,a)=>{let{color:l="currentColor",size:o=24,strokeWidth:u=2,absoluteStrokeWidth:c,className:d="",children:h,...m}=r;return(0,n.createElement)("svg",{ref:a,...s,width:o,height:o,stroke:l,strokeWidth:c?24*Number(u)/Number(o):u,className:["lucide","lucide-".concat(i(e)),d].join(" "),...m},[...t.map(e=>{let[t,r]=e;return(0,n.createElement)(t,r)}),...Array.isArray(h)?h:[h]])});return r.displayName="".concat(e),r}},7648:function(e,t,r){"use strict";r.d(t,{default:function(){return s.a}});var n=r(2972),s=r.n(n)},9010:function(e,t,r){"use strict";r.d(t,{Navbar:function(){return b}});var n=r(7437),s=r(2265),i=r(7648),a=r(3145),l=r(4603),o=r(3448),u=r(3378);function c(e){let{className:t,size:r="md"}=e;return(0,n.jsx)("div",{className:(0,o.cn)("animate-spin rounded-full border-2 border-white/20 border-t-primary-500",{sm:"w-4 h-4",md:"w-6 h-6",lg:"w-8 h-8"}[r],t)})}var d=r(9763);let h=(0,d.Z)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),m=(0,d.Z)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),v=(0,d.Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),f=(0,d.Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),x=["154388953053659137","344637470908088322","796587763851198474","492053410967846933","487476487386038292"];function b(){var e;let{user:t,loading:r,signInWithDiscord:d,signOut:b}=(0,l.a)(),[p,y]=(0,s.useState)(!1),g=(null==t?void 0:null===(e=t.user_metadata)||void 0===e?void 0:e.provider_id)&&x.includes(t.user_metadata.provider_id);return r?(0,n.jsx)("nav",{className:"backdrop-blur-md bg-background-secondary/60 border-b border-white/5 sticky top-0 z-50",children:(0,n.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,n.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,n.jsxs)(i.default,{href:"/",className:"text-xl font-bold text-primary-500 relative",children:["The A-List Hub",(0,n.jsx)("span",{className:"absolute -top-0.5 -right-6 text-[0.60rem] bg-primary-500 text-black px-1.5 py-0.5 rounded-sm font-bold leading-none",children:"v2"})]}),(0,n.jsx)(c,{})]})})}):(0,n.jsx)("nav",{className:"backdrop-blur-md bg-background-secondary/60 border-b border-white/5 sticky top-0 z-50",children:(0,n.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,n.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,n.jsxs)(i.default,{href:"/",className:"text-xl font-bold text-primary-500 hover:text-primary-400 transition-colors relative",children:["The A-List Hub",(0,n.jsx)("span",{className:"absolute -top-0.5 -right-6 text-[0.60rem] bg-primary-500 text-black px-1.5 py-0.5 rounded-sm font-bold leading-none",children:"v2"})]}),t?(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsxs)("button",{onClick:()=>y(!p),className:"flex items-center space-x-3 text-white hover:text-primary-400 transition-colors",children:[(0,n.jsx)(a.default,{src:(0,o.E$)(t),alt:"Profile",width:32,height:32,className:"rounded-full"}),(0,n.jsx)("span",{className:"hidden sm:block font-medium",children:(0,o.Ms)(t)}),(0,n.jsx)(h,{className:"w-4 h-4"})]}),p&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"fixed inset-0 z-10",onClick:()=>y(!1)}),(0,n.jsx)("div",{className:"absolute right-0 mt-2 w-48 bg-background-secondary/95 backdrop-blur-md rounded-lg shadow-lg border border-white/10 z-20",children:(0,n.jsxs)("div",{className:"py-1",children:[g&&(0,n.jsxs)(i.default,{href:"/admin",className:"flex items-center px-4 py-2 text-sm text-white hover:bg-white/10 transition-colors",onClick:()=>y(!1),children:[(0,n.jsx)(m,{className:"w-4 h-4 mr-3"}),"Admin Suite"]}),(0,n.jsxs)(i.default,{href:"/profile",className:"flex items-center px-4 py-2 text-sm text-white hover:bg-white/10 transition-colors",onClick:()=>y(!1),children:[(0,n.jsx)(v,{className:"w-4 h-4 mr-3"}),"View Profile"]}),(0,n.jsxs)("button",{onClick:()=>{y(!1),b()},className:"flex items-center w-full px-4 py-2 text-sm text-red-400 hover:bg-white/10 transition-colors",children:[(0,n.jsx)(f,{className:"w-4 h-4 mr-3"}),"Logout"]})]})})]})]}):(0,n.jsx)(u.Button,{onClick:d,variant:"secondary",children:"Login with Discord"})]})})})}},3378:function(e,t,r){"use strict";let n,s;r.d(t,{Button:function(){return h}});var i=r(7437),a=r(2265),l=r(1994);let o=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,u=l.W;var c=r(3448);let d=(n="inline-flex items-center justify-center rounded-lg text-sm font-medium transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",s={variants:{variant:{default:"bg-gradient-to-r from-primary-500 to-primary-600 text-white hover:from-primary-600 hover:to-primary-700 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",secondary:"bg-white/10 text-white border border-white/20 hover:bg-white/20 backdrop-blur-sm",ghost:"hover:bg-white/10 text-white",link:"text-primary-500 underline-offset-4 hover:underline",premium:"bg-gradient-to-r from-yellow-400 to-yellow-600 text-black font-bold hover:from-yellow-500 hover:to-yellow-700 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",xl:"h-12 rounded-lg px-10 text-base",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}},e=>{var t;if((null==s?void 0:s.variants)==null)return u(n,null==e?void 0:e.class,null==e?void 0:e.className);let{variants:r,defaultVariants:i}=s,a=Object.keys(r).map(t=>{let n=null==e?void 0:e[t],s=null==i?void 0:i[t];if(null===n)return null;let a=o(n)||o(s);return r[t][a]}),l=e&&Object.entries(e).reduce((e,t)=>{let[r,n]=t;return void 0===n||(e[r]=n),e},{});return u(n,a,null==s?void 0:null===(t=s.compoundVariants)||void 0===t?void 0:t.reduce((e,t)=>{let{class:r,className:n,...s}=t;return Object.entries(s).every(e=>{let[t,r]=e;return Array.isArray(r)?r.includes({...i,...l}[t]):({...i,...l})[t]===r})?[...e,r,n]:e},[]),null==e?void 0:e.class,null==e?void 0:e.className)}),h=(0,a.forwardRef)((e,t)=>{let{className:r,variant:n,size:s,asChild:a=!1,...l}=e;return(0,i.jsx)("button",{className:(0,c.cn)(d({variant:n,size:s,className:r})),ref:t,...l})});h.displayName="Button"},4603:function(e,t,r){"use strict";r.d(t,{AuthProvider:function(){return u},a:function(){return o}});var n=r(7437),s=r(2265),i=r(8933),a=r(3448);let l=(0,s.createContext)({user:null,session:null,loading:!0,hasAccess:!1,isTrialActive:!1,signInWithDiscord:async()=>{},signOut:async()=>{},refreshUserData:async()=>{}}),o=()=>{let e=(0,s.useContext)(l);if(!e)throw Error("useAuth must be used within an AuthProvider");return e};function u(e){let{children:t}=e,[r,o]=(0,s.useState)({user:null,session:null,loading:!0,hasAccess:!1,isTrialActive:!1}),u=(0,i.e)(),c=async e=>{let t=(0,a.Xl)(e);if(!t)return{hasAccess:!1,isTrialActive:!1};try{let{data:e,error:r}=await u.from("users").select("revoked, hub_trial, trial_expiration").eq("discord_id",t).single();if(r||!e)return{hasAccess:!1,isTrialActive:!1};let n=(0,a.$1)(e);return{hasAccess:(0,a.Bi)(e),isTrialActive:n}}catch(e){return{hasAccess:!1,isTrialActive:!1}}},d=async()=>{if(!r.user)return;let{hasAccess:e,isTrialActive:t}=await c(r.user);o(r=>({...r,hasAccess:e,isTrialActive:t}))},h=async()=>{try{let{error:e}=await u.auth.signInWithOAuth({provider:"discord",options:{redirectTo:"".concat(window.location.origin,"/auth/callback")}});if(e)throw e}catch(e){}},m=async()=>{try{let{error:e}=await u.auth.signOut();if(e)throw e;o({user:null,session:null,loading:!1,hasAccess:!1,isTrialActive:!1})}catch(e){}};return(0,s.useEffect)(()=>{(async()=>{try{let{data:{session:t},error:r}=await u.auth.getSession();if(r){o(e=>({...e,loading:!1}));return}if(null==t?void 0:t.user){var e;let{hasAccess:r,isTrialActive:n}=await c(t.user);o({user:t.user,session:t,loading:!1,hasAccess:r,isTrialActive:n});let s=(0,a.Xl)(t.user),i=(null===(e=t.user.user_metadata)||void 0===e?void 0:e.full_name)||"Discord User";s&&await u.rpc("upsert_user_login",{target_discord_id:s,user_name:i})}else o(e=>({...e,loading:!1}))}catch(e){o(e=>({...e,loading:!1}))}})();let{data:{subscription:e}}=u.auth.onAuthStateChange(async(e,t)=>{if("SIGNED_IN"===e&&(null==t?void 0:t.user)){let{hasAccess:e,isTrialActive:r}=await c(t.user);o({user:t.user,session:t,loading:!1,hasAccess:e,isTrialActive:r})}else"SIGNED_OUT"===e&&o({user:null,session:null,loading:!1,hasAccess:!1,isTrialActive:!1})});return()=>e.unsubscribe()},[]),(0,s.useEffect)(()=>{if(!r.user)return;let e=(0,a.Xl)(r.user);if(!e)return;let t=u.channel("user-access-changes").on("postgres_changes",{event:"UPDATE",schema:"public",table:"users",filter:"discord_id=eq.".concat(e)},async e=>{await d()}).subscribe();return()=>{u.removeChannel(t)}},[r.user]),(0,n.jsx)(l.Provider,{value:{...r,signInWithDiscord:h,signOut:m,refreshUserData:d},children:t})}},8933:function(e,t,r){"use strict";r.d(t,{e:function(){return s}});var n=r(9924);let s=()=>(0,n.AY)("https://dsexkdjxmhgqahrlkvax.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRzZXhrZGp4bWhncWFocmxrdmF4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDg0ODAxNTAsImV4cCI6MjA2NDA1NjE1MH0.RW_ROpcNUNZaK9xGH2OFwHBSmFsGrLj-yi3LWCPBCvA")},3448:function(e,t,r){"use strict";r.d(t,{$1:function(){return u},Bi:function(){return c},E$:function(){return o},Ms:function(){return l},Xl:function(){return a},cn:function(){return i}});var n=r(1994),s=r(3335);function i(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.m6)((0,n.W)(t))}function a(e){var t,r;return(null==e?void 0:null===(t=e.user_metadata)||void 0===t?void 0:t.provider_id)||(null==e?void 0:null===(r=e.user_metadata)||void 0===r?void 0:r.sub)||null}function l(e){var t,r,n;return(null==e?void 0:null===(t=e.user_metadata)||void 0===t?void 0:t.full_name)||(null==e?void 0:null===(r=e.user_metadata)||void 0===r?void 0:r.name)||(null==e?void 0:null===(n=e.user_metadata)||void 0===n?void 0:n.user_name)||"Discord User"}function o(e){var t;return(null==e?void 0:null===(t=e.user_metadata)||void 0===t?void 0:t.avatar_url)||"https://cdn.discordapp.com/embed/avatars/0.png"}function u(e){if(!(null==e?void 0:e.hub_trial)||!(null==e?void 0:e.trial_expiration))return!1;let t=new Date;return new Date(e.trial_expiration)>t}function c(e){return!!e&&(!1===e.revoked||u(e))}},2778:function(){}},function(e){e.O(0,[461,454,924,972,145,971,117,744],function(){return e(e.s=3844)}),_N_E=e.O()}]);