(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[178],{6532:function(e,t,r){Promise.resolve().then(r.bind(r,1380))},7648:function(e,t,r){"use strict";r.d(t,{default:function(){return i.a}});var a=r(2972),i=r.n(a)},9376:function(e,t,r){"use strict";var a=r(5475);r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}})},1380:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return f}});var a=r(7437),i=r(2265),n=r(9376),s=r(3145),l=r(7648),o=r(4603),d=r(2495),c=r(8933),u=r(3448);let m=["Components","HQ Components"],h={Weapons:["AK-74","AKS-74U","CheyTac M200 Intervention","Colt 1911","Desert Eagle","M16A2","M16A2 - AUTO","M16 Carbine","M21 SWS","M249 SAW","M416","M9","MP 43 1C","MP5A2","MP7A2","PKM","PM","RPK-74","Sa-58P","Sa-58V","Scar-H","SIG MCX","SIG MCX SPEAR","SSG10A2-Sniper","Steyr AUG","SR-25 Rifle","SVD"],Magazines:["30rnd 9x19 Mag","8rnd .45 ACP","9x18mm 8rnd PM Mag","9x19mm 15rnd M9 Mag",".300 Blackout Mag",".338 5rnd FMJ",".50 AE 7rnd Mag","12/70 7mm Buckshot","4.6x40 40rnd Mag","5.45x39mm 30rnd AK Mag","5.45x39mm 45rnd RPK-74 Tracer Mag","5.56x45mm 30rnd AUG Mag","5.56x45mm 30rnd STANAG Mag","5.56x45mm 200rnd M249 Belt","7Rnd M200 Magazine","7.62x39mm 30rnd Sa-58 Mag","7.62x51mm FMJ","7.62x51mm 20rnd M14 Mag","7.62x51mm 30rnd Mag","SR25 7.62x51mm 20rnd","7.62x54mmR 100rnd PK Belt","7.62x54mmR 10rnd SVD Sniper Mag","SPEAR 6.8x51 25rnd"],Attachments:["A2 Flash Hider","ART II Scope","Carry Handle Red-Dot-Sight","EOTECH XPS3","Elcan Specter","Leupold VX-6","PSO-1 Scope","Reflex Scope","4x20 Carry Handle Scope","4.7mm FlashHider","6.8x51mm FlashHider","6P26 Flash Hider","6P20 Muzzle Brake","7.62x51mm FlashHider"],Vehicles:["M1025 Light Armoured Vehicle","M151A2 Off-Road","M151A2 Off-Road Open Top","M923A1 Fuel Truck","M923A1 Transport Truck","M923A1 Transport Truck - Canopy","M998 Light Utility Vehicle","M998 Light Utility Vehicle - Canopy","Mi-8MT Transport Helicopter","Pickup-Truck","S105 Car","S1203 Minibus","S1203 - Laboratory","UAZ-452 Off-road","UAZ-452 Off-road - Laboratory","UAZ-469 Off-road","UAZ-469 Off-road - Open Top","UH-1H Transport Helicopter","Ural-4320 Fuel Truck","Ural-4320 Transport Truck","Ural-4320 Transport Truck - Canopy","Ural (Device)","VW Rolf"],Vests:["6B2 Vest","6B3 Vest","M69 Vest","PASGT Vest"],Helmets:["PASGT Helmet","PASGT Helmet - Camouflaged","PASGT Helmet - Camouflaged Netting","SPH-4 Helmet","SSh-68 Helmet","SSh-68 Helmet - Camouflaged","SSh-68 Helmet - Cover","SSh-68 Helmet - KZS","SSh-68 Helmet - Netting","ZSh-5 Helmet"],Clothes:["ALICE Medium Backpack","Bandana","Balaclava","BDU Blouse","BDU Blouse - Rolled-up","BDU Trousers","Beanie","Boonie","Cap - All Variants","Cargo Pants","Cargo Pants (Colored)","Cardigan","Classic Shoe","CWU-27 Pilot Coveralls","Dress","Fedora","Fisher Hat","Flat Cap","Half Mask","Hunting Vest","IIFS Large Combat Field Pack","Jacket","Jeans","Jeans (Colored)","KLMK Coveralls","Knit Cap","Kolobok Backpack","M70 Backpack","M70 Cap","M70 Parka","M70 Trousers","M88 Field Cap","M88 Jacket","M88 Jacket - Rolled-up","M88 Trousers","Mask (Medical)","Mask (Latex)","Mask (Ski)","Officer's Cap","Panamka","Paper Bag","Polo","Pullover","Robe","Runner Shoe","Sneaker","Soviet Combat Boots","Soviet Pilot Jacket","Soviet Pilot Pants","Suit Jacket","Suit Pants","Sweater","Sweat Pants","TShirt","US Combat Boots","Veshmeshok Backpack","Wool Hat"],"HQ Components":["Ammo (HQ)","Attachment Part (HQ)","Component (HQ)","Engine Part (HQ)","Interior Part (HQ)","Kevlar","Mechanical Component (HQ)","Rotor (HQ)","Stabilizer (HQ)","Weapon Part (HQ)","Special Rotor","Special Gun Barrel"],Components:["Cloth","Iron Plate","Component","Tempered Glass","Weapon Part","Stabilizer","Attachment Part","Ammo","Mechanical Component","Engine Part","Interior Part","Rotor"]};function f(){(0,d.j)();let e=(0,n.useRouter)(),{user:t,loading:r,signOut:f}=(0,o.a)(),b=(0,c.e)(),[p,x]=(0,i.useState)(null),[g,v]=(0,i.useState)([]),[w,S]=(0,i.useState)(new Set),[y,_]=(0,i.useState)(!1),[A,M]=(0,i.useState)({type:null,message:""}),[j,C]=(0,i.useState)(!0),[k,N]=(0,i.useState)(null),P=(0,i.useCallback)(async()=>{if(t)try{let e=(0,u.Xl)(t);if(!e){N("Could not determine Discord ID"),C(!1);return}let{data:r,error:a}=await b.rpc("get_profile_and_blueprints",{user_discord_id:e});if(a){N("Failed to load user data"),C(!1);return}if(r.profile&&x(r.profile),r.blueprints&&Array.isArray(r.blueprints)){let e=r.blueprints.map(e=>e.blueprint_name);v(e);let t=new Set;e.forEach(e=>t.add(e)),m.forEach(e=>{h[e]&&h[e].forEach(e=>t.add(e))}),S(t)}C(!1)}catch(e){N("An unexpected error occurred"),C(!1)}},[t,b]),D=(0,i.useCallback)(async()=>{if(t)try{let e=(0,u.Xl)(t);if(!e){N("Could not determine Discord ID"),C(!1);return}let{data:r,error:a}=await b.from("users").select("*").eq("discord_id",e).single();a&&"PGRST116"!==a.code||r&&x(r);let{data:i,error:n}=await b.from("user_blueprints").select("*").eq("discord_id",e);if(n);else if(i){let e=i.map(e=>e.blueprint_name);v(e);let t=new Set;e.forEach(e=>t.add(e)),m.forEach(e=>{h[e]&&h[e].forEach(e=>t.add(e))}),S(t)}C(!1)}catch(e){N("An unexpected error occurred"),C(!1)}},[t,b]);(0,i.useEffect)(()=>{!r&&t?P().catch(()=>{D()}):r||t||e.push("/")},[r,t,P,D,e]);let T=e=>{S(t=>{let r=new Set(t);return r.has(e)?r.delete(e):r.add(e),r})},H=async()=>{if(t){_(!0),M({type:null,message:""});try{let e=(0,u.Xl)(t);if(!e)throw Error("Could not determine Discord ID");let r=Array.from(w).filter(e=>{for(let r of m){var t;if(null===(t=h[r])||void 0===t?void 0:t.includes(e))return!1}return!0}),{error:a}=await b.from("user_blueprints").delete().eq("discord_id",e);if(a)throw a;if(r.length>0){let t=r.map(t=>({discord_id:e,blueprint_name:t})),{error:a}=await b.from("user_blueprints").insert(t);if(a)throw a}M({type:"success",message:"Blueprints saved successfully!"}),v(r)}catch(e){M({type:"error",message:"Failed to save blueprints. Please try again."})}finally{_(!1),setTimeout(()=>{M({type:null,message:""})},3e3)}}},{total:I,selected:E}=(()=>{let e=Object.entries(h).filter(e=>{let[t]=e;return!m.includes(t)}).flatMap(e=>{let[,t]=e;return t}),t=Array.from(w).filter(t=>e.includes(t)).length;return{total:e.length,selected:t}})();return r?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-[#0a0a0a] to-[#1a1a1a]",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-[#00c6ff]"})}):t?(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-[#0a0a0a] to-[#1a1a1a] text-[#e8e8e8] p-4 md:p-8",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,a.jsx)(l.default,{href:"/",className:"inline-flex items-center gap-2 bg-white/5 backdrop-blur-xl border border-white/10 text-[#00c6ff] px-4 py-3 rounded-xl font-semibold transition-all hover:bg-[#00c6ff]/10 hover:border-[#00c6ff]/30 hover:-translate-y-0.5 mb-6",children:"← Back"}),(0,a.jsxs)("div",{className:"bg-[#141414]/90 backdrop-blur-xl border border-white/10 rounded-3xl p-6 md:p-10 mb-6 relative overflow-hidden",children:[(0,a.jsx)("div",{className:"absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-[#00c6ff]/50 to-transparent"}),(0,a.jsxs)("div",{className:"flex flex-col md:flex-row items-center md:items-start gap-6 mb-8",children:[(0,a.jsx)("div",{className:"w-24 h-24 rounded-full border-3 border-[#00c6ff]/30 bg-gradient-to-br from-[#00c6ff] to-[#0072ff] overflow-hidden flex-shrink-0",children:(0,a.jsx)(s.default,{src:(0,u.E$)(t),alt:"Avatar",width:96,height:96,className:"rounded-full object-cover",priority:!0})}),(0,a.jsxs)("div",{className:"text-center md:text-left",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold mb-1 bg-gradient-to-r from-white to-[#e8e8e8] inline-block text-transparent bg-clip-text break-words",children:(0,u.Ms)(t)}),(0,a.jsx)("div",{className:"text-[#a0a0a0]",children:"Discord Profile"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-8",children:[(0,a.jsxs)("div",{className:"bg-white/[0.03] border border-white/[0.08] rounded-xl p-5 transition-all hover:bg-white/[0.05] hover:border-[#00c6ff]/20 hover:-translate-y-0.5",children:[(0,a.jsx)("div",{className:"text-[#a0a0a0] text-xs font-semibold uppercase tracking-wider mb-2",children:"Discord ID"}),(0,a.jsx)("div",{className:"text-white font-semibold break-all",children:(0,u.Xl)(t)})]}),(0,a.jsxs)("div",{className:"bg-white/[0.03] border border-white/[0.08] rounded-xl p-5 transition-all hover:bg-white/[0.05] hover:border-[#00c6ff]/20 hover:-translate-y-0.5",children:[(0,a.jsx)("div",{className:"text-[#a0a0a0] text-xs font-semibold uppercase tracking-wider mb-2",children:"Status"}),(0,a.jsx)("div",{children:(0,a.jsx)("span",{className:"inline-flex items-center gap-2 px-4 py-1.5 rounded-full text-sm font-semibold ".concat((null==p?void 0:p.revoked)?"bg-red-500/20 text-red-400 border border-red-500/30":"bg-green-500/20 text-green-400 border border-green-500/30"),children:(null==p?void 0:p.revoked)?"Access Revoked":"Whitelisted"})})]}),(0,a.jsxs)("div",{className:"bg-white/[0.03] border border-white/[0.08] rounded-xl p-5 transition-all hover:bg-white/[0.05] hover:border-[#00c6ff]/20 hover:-translate-y-0.5",children:[(0,a.jsx)("div",{className:"text-[#a0a0a0] text-xs font-semibold uppercase tracking-wider mb-2",children:"Member Since"}),(0,a.jsx)("div",{className:"text-white font-semibold",children:(null==p?void 0:p.created_at)?new Date(p.created_at).toLocaleDateString():"—"})]}),(0,a.jsxs)("div",{className:"bg-white/[0.03] border border-white/[0.08] rounded-xl p-5 transition-all hover:bg-white/[0.05] hover:border-[#00c6ff]/20 hover:-translate-y-0.5",children:[(0,a.jsx)("div",{className:"text-[#a0a0a0] text-xs font-semibold uppercase tracking-wider mb-2",children:"Last Login"}),(0,a.jsx)("div",{className:"text-white font-semibold",children:(null==p?void 0:p.last_login)?new Date(p.last_login).toLocaleDateString():"—"})]}),(0,a.jsxs)("div",{className:"bg-white/[0.03] border border-white/[0.08] rounded-xl p-5 transition-all hover:bg-white/[0.05] hover:border-[#00c6ff]/20 hover:-translate-y-0.5",children:[(0,a.jsx)("div",{className:"text-[#a0a0a0] text-xs font-semibold uppercase tracking-wider mb-2",children:"Login Count"}),(0,a.jsx)("div",{className:"text-white font-semibold",children:(null==p?void 0:p.login_count)||0})]}),(null==p?void 0:p.hub_trial)&&(0,a.jsxs)("div",{className:"bg-white/[0.03] border border-white/[0.08] rounded-xl p-5 transition-all hover:bg-white/[0.05] hover:border-[#00c6ff]/20 hover:-translate-y-0.5",children:[(0,a.jsx)("div",{className:"text-[#a0a0a0] text-xs font-semibold uppercase tracking-wider mb-2",children:"Trial Status"}),(0,a.jsx)("div",{children:(0,a.jsx)("span",{className:"inline-flex items-center gap-2 px-4 py-1.5 rounded-full text-sm font-semibold ".concat(p.trial_expiration&&new Date(p.trial_expiration)>new Date?"bg-yellow-500/20 text-yellow-400 border border-yellow-500/30":"bg-red-500/20 text-red-400 border border-red-500/30"),children:p.trial_expiration&&new Date(p.trial_expiration)>new Date?"Trial Active (Expires: ".concat(new Date(p.trial_expiration).toLocaleDateString(),")"):"Trial Expired"})})]})]}),(0,a.jsx)("button",{onClick:()=>f(),className:"bg-gradient-to-r from-red-500 to-red-600 text-white border-none py-4 px-8 rounded-xl font-semibold text-base transition-all hover:-translate-y-0.5 hover:shadow-lg shadow-md w-full md:w-auto",children:"Sign Out"})]}),(0,a.jsxs)("div",{className:"bg-[#141414]/90 backdrop-blur-xl border border-white/10 rounded-3xl p-6 md:p-10 relative overflow-hidden",children:[(0,a.jsx)("div",{className:"absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-[#00c6ff]/50 to-transparent"}),(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsx)("h2",{className:"text-2xl md:text-3xl font-bold mb-4",children:"My Blueprints"}),(0,a.jsxs)("div",{className:"bg-[#00c6ff]/10 border border-[#00c6ff]/20 text-[#00c6ff] py-2 px-5 rounded-xl font-semibold text-sm inline-block mb-4",children:["\uD83D\uDCC3 Selected: ",E," / ",I," Blueprints"]}),(0,a.jsx)("p",{className:"text-[#a0a0a0] text-base max-w-2xl mx-auto",children:"Select the blueprints you own. These will appear in the Crafting Calculator and help optimize your gameplay experience."})]}),j?(0,a.jsx)("div",{className:"flex justify-center py-8",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-[#00c6ff]"})}):k?(0,a.jsxs)("div",{className:"bg-red-500/10 border border-red-500/20 text-red-400 p-4 rounded-lg text-center mb-8",children:[k,(0,a.jsx)("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-white/10 rounded-lg hover:bg-white/20 transition-colors",children:"Retry"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"space-y-4 mb-8",children:Object.entries(h).map(e=>{let[t,r]=e,i=m.includes(t);return(0,a.jsxs)("details",{className:"group bg-white/[0.02] border border-white/[0.08] rounded-xl overflow-hidden",children:[(0,a.jsxs)("summary",{className:"flex items-center justify-between p-5 cursor-pointer bg-white/[0.03] font-semibold text-white hover:bg-white/[0.05] transition-all",children:[t,(0,a.jsx)("span",{className:"text-[#00c6ff] text-sm transition-transform duration-300 group-open:rotate-180",children:"▼"})]}),(0,a.jsx)("div",{className:"p-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:r.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 bg-white/[0.02] border border-white/[0.05] rounded-lg hover:bg-white/[0.04] hover:border-[#00c6ff]/20 transition-all",children:[(0,a.jsx)("div",{className:"text-[#e8e8e8] text-sm font-medium pr-4 break-words flex-1",children:e}),(0,a.jsxs)("div",{className:"relative flex-shrink-0",children:[(0,a.jsx)("input",{type:"checkbox",className:"sr-only",checked:w.has(e)||i,onChange:()=>T(e),disabled:i}),(0,a.jsx)("div",{className:"relative w-12 h-6 rounded-full transition-all duration-300 cursor-pointer ".concat(w.has(e)||i?"bg-gradient-to-r from-[#00c6ff] to-[#0072ff]":"bg-white/20"," ").concat(i?"opacity-60 cursor-not-allowed":""),onClick:()=>!i&&T(e),children:(0,a.jsx)("div",{className:"absolute top-0.5 left-0.5 w-5 h-5 bg-white rounded-full transition-transform duration-300 shadow-lg ".concat(w.has(e)||i?"translate-x-6":"translate-x-0")})})]})]},e))})]},t)})}),(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[A.type&&(0,a.jsx)("div",{className:"mb-4 py-3 px-6 rounded-lg text-center ".concat("success"===A.type?"bg-green-500/10 border border-green-500/20 text-green-400":"bg-red-500/10 border border-red-500/20 text-red-400"),children:A.message}),(0,a.jsx)("button",{onClick:H,disabled:y,className:"bg-gradient-to-r from-[#00c6ff] to-[#0072ff] text-white border-none py-4 px-8 rounded-xl font-semibold text-base transition-all hover:-translate-y-0.5 hover:shadow-lg shadow-md disabled:opacity-70 disabled:cursor-not-allowed",children:y?"Saving...":"Save Blueprint Selection"})]})]})]})]})}):null}},4603:function(e,t,r){"use strict";r.d(t,{AuthProvider:function(){return d},a:function(){return o}});var a=r(7437),i=r(2265),n=r(8933),s=r(3448);let l=(0,i.createContext)({user:null,session:null,loading:!0,hasAccess:!1,isTrialActive:!1,signInWithDiscord:async()=>{},signOut:async()=>{},refreshUserData:async()=>{}}),o=()=>{let e=(0,i.useContext)(l);if(!e)throw Error("useAuth must be used within an AuthProvider");return e};function d(e){let{children:t}=e,[r,o]=(0,i.useState)({user:null,session:null,loading:!0,hasAccess:!1,isTrialActive:!1}),d=(0,n.e)(),c=async e=>{let t=(0,s.Xl)(e);if(!t)return{hasAccess:!1,isTrialActive:!1};try{let{data:e,error:r}=await d.from("users").select("revoked, hub_trial, trial_expiration").eq("discord_id",t).single();if(r||!e)return{hasAccess:!1,isTrialActive:!1};let a=(0,s.$1)(e);return{hasAccess:(0,s.Bi)(e),isTrialActive:a}}catch(e){return{hasAccess:!1,isTrialActive:!1}}},u=async()=>{if(!r.user)return;let{hasAccess:e,isTrialActive:t}=await c(r.user);o(r=>({...r,hasAccess:e,isTrialActive:t}))},m=async()=>{try{let{error:e}=await d.auth.signInWithOAuth({provider:"discord",options:{redirectTo:"".concat(window.location.origin,"/auth/callback")}});if(e)throw e}catch(e){}},h=async()=>{try{let{error:e}=await d.auth.signOut();if(e)throw e;o({user:null,session:null,loading:!1,hasAccess:!1,isTrialActive:!1})}catch(e){}};return(0,i.useEffect)(()=>{(async()=>{try{let{data:{session:t},error:r}=await d.auth.getSession();if(r){o(e=>({...e,loading:!1}));return}if(null==t?void 0:t.user){var e;let{hasAccess:r,isTrialActive:a}=await c(t.user);o({user:t.user,session:t,loading:!1,hasAccess:r,isTrialActive:a});let i=(0,s.Xl)(t.user),n=(null===(e=t.user.user_metadata)||void 0===e?void 0:e.full_name)||"Discord User";i&&await d.rpc("upsert_user_login",{target_discord_id:i,user_name:n})}else o(e=>({...e,loading:!1}))}catch(e){o(e=>({...e,loading:!1}))}})();let{data:{subscription:e}}=d.auth.onAuthStateChange(async(e,t)=>{if("SIGNED_IN"===e&&(null==t?void 0:t.user)){let{hasAccess:e,isTrialActive:r}=await c(t.user);o({user:t.user,session:t,loading:!1,hasAccess:e,isTrialActive:r})}else"SIGNED_OUT"===e&&o({user:null,session:null,loading:!1,hasAccess:!1,isTrialActive:!1})});return()=>e.unsubscribe()},[]),(0,i.useEffect)(()=>{if(!r.user)return;let e=(0,s.Xl)(r.user);if(!e)return;let t=d.channel("user-access-changes").on("postgres_changes",{event:"UPDATE",schema:"public",table:"users",filter:"discord_id=eq.".concat(e)},async e=>{await u()}).subscribe();return()=>{d.removeChannel(t)}},[r.user]),(0,a.jsx)(l.Provider,{value:{...r,signInWithDiscord:m,signOut:h,refreshUserData:u},children:t})}},2495:function(e,t,r){"use strict";r.d(t,{j:function(){return o}});var a=r(2265),i=r(9376),n=r(8933),s=r(4603),l=r(3448);function o(){let{user:e}=(0,s.a)(),t=(0,i.usePathname)(),r=(0,n.e)(),o=(0,a.useRef)(null),d=(0,a.useRef)(null);(0,a.useEffect)(()=>{if(!e)return;let a=(0,l.Xl)(e),i=(0,l.Ms)(e);if(!a)return;let n=async()=>{if(o.current)try{await r.from("page_sessions").update({exit_time:new Date().toISOString(),is_active:!1}).eq("id",o.current)}catch(e){}},s=async()=>{if(o.current&&"visible"===document.visibilityState)try{await r.from("page_sessions").update({is_active:!0}).eq("id",o.current)}catch(e){}};(async e=>{try{o.current&&d.current&&await r.from("page_sessions").update({exit_time:new Date().toISOString(),is_active:!1}).eq("id",o.current);let{data:t,error:n}=await r.from("page_sessions").insert([{discord_id:a,username:i,page_path:e,enter_time:new Date().toISOString(),is_active:!0}]).select("id").single();n||(o.current=(null==t?void 0:t.id)||null,d.current=e)}catch(e){}})(t);let c=()=>{"hidden"===document.visibilityState?o.current&&Promise.resolve(r.from("page_sessions").update({is_active:!1}).eq("id",o.current)).then(()=>{}).catch(console.error):"visible"===document.visibilityState&&s()},u=()=>{n()};document.addEventListener("visibilitychange",c),window.addEventListener("beforeunload",u);let m=setInterval(s,3e4);return()=>{document.removeEventListener("visibilitychange",c),window.removeEventListener("beforeunload",u),clearInterval(m),n()}},[e,t]),(0,a.useEffect)(()=>{if(!e||!o.current)return;let a=(0,l.Xl)(e),i=(0,l.Ms)(e);if(!a)return;let n=async()=>{o.current&&await r.from("page_sessions").update({exit_time:new Date().toISOString(),is_active:!1}).eq("id",o.current);let{data:e,error:n}=await r.from("page_sessions").insert([{discord_id:a,username:i,page_path:t,enter_time:new Date().toISOString(),is_active:!0}]).select("id").single();!n&&e&&(o.current=e.id,d.current=t)};d.current!==t&&n()},[t,e])}},8933:function(e,t,r){"use strict";r.d(t,{e:function(){return i}});var a=r(9924);let i=()=>(0,a.AY)("https://dsexkdjxmhgqahrlkvax.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRzZXhrZGp4bWhncWFocmxrdmF4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDg0ODAxNTAsImV4cCI6MjA2NDA1NjE1MH0.RW_ROpcNUNZaK9xGH2OFwHBSmFsGrLj-yi3LWCPBCvA")},3448:function(e,t,r){"use strict";r.d(t,{$1:function(){return d},Bi:function(){return c},E$:function(){return o},Ms:function(){return l},Xl:function(){return s},cn:function(){return n}});var a=r(1994),i=r(3335);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,i.m6)((0,a.W)(t))}function s(e){var t,r;return(null==e?void 0:null===(t=e.user_metadata)||void 0===t?void 0:t.provider_id)||(null==e?void 0:null===(r=e.user_metadata)||void 0===r?void 0:r.sub)||null}function l(e){var t,r,a;return(null==e?void 0:null===(t=e.user_metadata)||void 0===t?void 0:t.full_name)||(null==e?void 0:null===(r=e.user_metadata)||void 0===r?void 0:r.name)||(null==e?void 0:null===(a=e.user_metadata)||void 0===a?void 0:a.user_name)||"Discord User"}function o(e){var t;return(null==e?void 0:null===(t=e.user_metadata)||void 0===t?void 0:t.avatar_url)||"https://cdn.discordapp.com/embed/avatars/0.png"}function d(e){if(!(null==e?void 0:e.hub_trial)||!(null==e?void 0:e.trial_expiration))return!1;let t=new Date;return new Date(e.trial_expiration)>t}function c(e){return!!e&&(!1===e.revoked||d(e))}}},function(e){e.O(0,[454,924,972,145,971,117,744],function(){return e(e.s=6532)}),_N_E=e.O()}]);